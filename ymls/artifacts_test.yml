
# Workflow para probar el uso de artifacts en GitHub Actions
name: Artifacts test # primera directiva


# segunda directiva (Define los eventos que disparan el workflow)
on: push

jobs: # En esta directiva se definen todos los jobs a ejecutar
  j1: # Primer job
    name: job 1 # Nombre descriptivo del job
    runs-on: ubuntu-latest # Define el runner
    # Cada paso de este job se define en la directiva steps
    steps:
      - name: generador archivo
        run: | # Genera un archivo de prueba
          echo "Archivo prueba, hola" >> test.log
      - name: subir Artifact
        uses: actions/upload-artifact@v4 # Usa la acción para subir artifacts
        with:
          name: archivo-test # Nombre del artifact
          path: test.log # Ruta del archivo a subir

  j2: # Segundo job
    name: job 2 # Nombre descriptivo del job
    runs-on: ubuntu-latest # Define el runner
    needs: j1 # Este job depende del job 1
    # Cada paso de este job se define en la directiva steps
    steps:
      - name: Descargar artifact
        uses: actions/download-artifact@v4 # Usa la acción para descargar artifacts
        with:
          name: archivo-test # Nombre del artifact a descargar
      - name: Cat file
        run: cat test.log # Muestra el contenido del archivo descargado